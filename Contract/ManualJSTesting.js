//setting the default account to use (who pays)
web3.eth.defaultAccount = web3.eth.accounts[0]

//solcjs --abi HelloWorld.sol
//define the ABI (interface)
var helloWorld = web3.eth.contract([{"constant":true,"inputs":[],"name":"getName","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"}],"name":"setName","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"sayHello","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}])

//solcjs --bin HelloWorld.sol
//define the bytecode (EVM instructions to use)
var bytecode = '6060604052341561000f57600080fd5b6040805190810160405280600781526020017f4e4f545f534554000000000000000000000000000000000000000000000000008152506000908051906020019061005a929190610060565b50610105565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a157805160ff19168380011785556100cf565b828001600101855582156100cf579182015b828111156100ce5782518255916020019190600101906100b3565b5b5090506100dc91906100e0565b5090565b61010291905b808211156100fe5760008160009055506001016100e6565b5090565b90565b61038c806101146000396000f300606060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806317d7de7c1461005c578063c47f0027146100ea578063ef5fb05b14610118575b600080fd5b341561006757600080fd5b61006f6101a6565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100af578082015181840152602081019050610094565b50505050905090810190601f1680156100dc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156100f557600080fd5b6101166004808035906020019082018035906020019190919290505061024e565b005b341561012357600080fd5b61012b610264565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561016b578082015181840152602081019050610150565b50505050905090810190601f1680156101985780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6101ae6102a7565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102445780601f1061021957610100808354040283529160200191610244565b820191906000526020600020905b81548152906001019060200180831161022757829003601f168201915b5050505050905090565b81816000919061025f9291906102bb565b505050565b61026c6102a7565b6040805190810160405280600c81526020017f48656c6c6f20576f726c64210000000000000000000000000000000000000000815250905090565b602060405190810160405280600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102fc57803560ff191683800117855561032a565b8280016001018555821561032a579182015b8281111561032957823582559160200191906001019061030e565b5b509050610337919061033b565b5090565b61035d91905b80821115610359576000816000905550600101610341565b5090565b905600a165627a7a72305820ad8eecaf779fffec6f48abc56849e65d72e74dac844c9a9cf414398549ff6b610029'

//deploy the contract (is a transaction)
var objHelloWorld = {from:web3.eth.coinbase, data:bytecode, gas: 2000000}
var helloWorldPartialInstance = helloWorld.new(objHelloWorld)

//get an instance of this contract
var helloWorldInstance = helloWorld.at(helloWorldPartialInstance.address)

//these are local calls (no transactions) as do not modify the state
helloWorldInstance.sayHello()
helloWorldInstance.getName()

//this call results in a transaction, it modifies the state
helloWorldInstance.setName("MyName")
helloWorldInstance.getName()
